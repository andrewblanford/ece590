<?xml version="1.0"?> 
<sdf version="1.4">
  <world name="default">

    <!-- Ground Plane -->
    <include>
      <uri>model://ground_plane</uri>
    </include>

    <include>
      <uri>model://sun</uri>
    </include>
   <model name ='box'>
      <pose>10 0 .5 0 0 0</pose>
      <link name='boxlink'>
         <collision name='collision'>
            <geometry>
               <box><size>1 1 1</size></box>
            </geometry>
         </collision>

         <visual name = 'visual'>
            <geometry>
               <box><size>1 1 1</size></box>
            </geometry>
            <material>
               <ambient>1 0 0 1</ambient>
               <diffuse>1 0 0 1</diffuse>
               <specular>0.1 0.1 0.1 1</specular>
               <emissive>0 0 0 0</emissive>
            </material>
         </visual>
      </link>
   </model> 

   <model name ='PanTiltCam'>
<static>false</static>
      <pose>0 0 0 0 0 0</pose>
      <link name ='base'>
         <pose>0 0 .025 0 0 0</pose>
         <collision name='collision'>
            <geometry>
               <box><size>.2 .2 .05</size></box>
            </geometry>
         </collision>
         <visual name = 'visual'>
            <geometry>
               <box><size>.2 .2 .05</size></box>
            </geometry>
            <material>
               <ambient>1 0 0 1</ambient>
               <diffuse>1 0 0 1</diffuse>
               <specular>0.1 0.1 0.1 1</specular>
               <emissive>0 0 0 0</emissive>
            </material>
         </visual>
      </link>
      <!-- pan servo --> 
      <link name ='panLink'>
         <pose>0 0 .07 0 0 0</pose>
         <collision name ='collision'>
            <geometry>
               <box>
                  <size>.050 .032 .040</size>
               </box>
            </geometry>
         </collision>
         <visual name ='visual'>
            <geometry>
               <box>
                  <size>.050 .032 .040</size>
               </box>
            </geometry>
            <material>
               <ambient>1 1 0 1</ambient>
               <diffuse>1 1 0 1</diffuse>
               <specular>0.1 0.1 0.1 1</specular>
               <emissive>0 0 0 0</emissive>
            </material>
         </visual>
      </link>
      <link name ='tiltLink'>
         <pose>.0135 0 .115 0 0 0</pose>
         <collision name ='collision'>
            <geometry>
               <box>
                  <size>.032 .040 .050</size>
               </box>
            </geometry>
         </collision>
         <visual name ='visual'>
            <geometry>
               <box>
                  <size>.032 .040 .050</size>
               </box>
            </geometry>
            <material>
               <ambient>0 1 0 1</ambient>
               <diffuse>0 1 0 1</diffuse>
               <specular>0.1 0.1 0.1 1</specular>
               <emissive>0 0 0 0</emissive>
            </material>
         </visual>
      </link>
      <link name ='armLink'>
         <pose>.0135 0 .1355 0 0 0</pose>
         <collision name ='collision'>
            <pose>0 0 .015 0 0 0</pose>
            <geometry>
               <box>
                  <size>.024 .048 .007</size>
               </box>
            </geometry>
         </collision>
         <visual name ='visual'>
            <geometry>
               <box>
                  <size>.024 .048 .037</size>
               </box>
            </geometry>
            <material>
               <ambient>0 0 1 1</ambient>
               <diffuse>0 0 1 1</diffuse>
               <specular>0.1 0.1 0.1 1</specular>
               <emissive>0 0 0 0</emissive>
            </material>
         </visual>
      </link>
      <link name='camLink'>
         <pose>.0135 0 .174 0 0 0</pose>
         <collision name ='collision'>
            <geometry>
               <sphere><radius>.02</radius></sphere>
            </geometry>
         </collision>
         <visual name ='visual'>
            <geometry>
               <sphere><radius>.02</radius></sphere>
            </geometry>
            <material>
               <ambient>0 1 1 1</ambient>
               <diffuse>0 1 1 1</diffuse>
               <specular>0.1 0.1 0.1 1</specular>
               <emissive>0 0 0 0</emissive>
            </material>
         </visual>
         <sensor name='cam_sensor1' type='camera'>
             <pose>.021 0 0 0 0 0</pose>
             <always_on>true</always_on>
             <update_rate>10</update_rate>
             <visualize>true</visualize>
             <camera>
                <horizontal_fov>1.57</horizontal_fov>
                <image>
                   <width>640</width>
                   <height>480</height>
                   <format>R8G8B8</format>
                </image>
                <clip>
                   <near>0.5</near>
                   <far>50</far>
                </clip>
             </camera>
             <!-- <plugin name='pt_video' filename='build/libpt_video.so'/> -->
         </sensor>
      </link>

      <!-- Joints -->
      <joint type="revolute" name="basejoint">
         <child>panLink</child>
         <parent>base</parent>
         <axis>
            <xyz>0 0 0</xyz>
            <limit>
               <upper>0</upper>
               <lower>0</lower>
            </limit>
         </axis>
      </joint>

      <joint type="revolute" name="pan">
         <child>tiltLink</child>
         <parent>panLink</parent>
         <axis><xyz>0 0 1</xyz></axis>
      </joint>

      <joint type="revolute" name="tilt">
         <pose>0 0 -.007 0 0 0</pose>
         <child>armLink</child>
         <parent>tiltLink</parent>
         <axis><xyz>0 1 0</xyz></axis>
      </joint>

      <joint type="revolute" name="camjoint">
         <child>camLink</child>
         <parent>armLink</parent>
         <axis>
            <xyz>0 0 0</xyz>
            <limit>
               <upper>0</upper>
               <lower>0</lower>
            </limit>
         </axis>
      </joint>


      <!-- plugin -->
      <plugin filename="build/libpt_drive.so" name="pt_drive_plugin">
         <pan>pan</pan>
         <tilt>tilt</tilt>
      </plugin>
   </model>


<!-- Light Source -->
        <light type="directional" name="sun">
            <pose>0 0 10 0 0 0</pose>
            <diffuse>1.0 1.0 1.0 1</diffuse>
            <specular>0 0 0 1</specular>
            <attenuation>
                <range>20</range>
                <linear>0.01</linear>
                <constant>0.8</constant>
                <quadratic>0.0</quadratic>
            </attenuation>
            <direction>0.0 0.2 -8.0</direction>
            <cast_shadows>true</cast_shadows>
        </light>
     
  </world>
</sdf>
